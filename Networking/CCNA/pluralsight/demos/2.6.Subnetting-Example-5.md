# Subnetting Example 5:<br>`172.16.128.0/17` → **30 networks required**

### Problem
- ISP gives: **`172.16.128.0/17`**
  - `/17` = `255.255.128.0`
  - Allocation range = **`172.16.128.0` → `172.16.255.255`**
- Requirement: **30 unique networks**

### Step 1 — Bits to borrow
- Bits available inside the `/17`: `32 − 17 = 15` bits
- Need ≥ 30 networks → smallest `2^n ≥ 30` is `2^5 = 32`
- **Borrow 5 bits** → `32` subnets available (we only need 30)

### Step 2 — New mask and host capacity
- New prefix = `17 + 5 = /22` → **/22 = `255.255.252.0`**
- Host bits remaining = `32 − 22 = 10`
- Usable hosts per subnet = `2^10 − 2 = 1024 − 2 = 1022` hosts

### Step 3 — Subnet size & increment
- Addresses per `/22` = **1024** = 4 × 256 (four full values of the 3rd octet)
- The `/22` block increments the **third octet** by **4** (because `256 − 252 = 4`).
- Since the /17 starts at third octet `128`, subnet `N` (0..31) has third octet:

  ```
  third_octet = 128 + (N * 4)
  ```

  (No carry beyond 255 happens here because N ≤ 31 → 128 + 31\*4 = 252 ≤ 255.)

### Step 4 — Examples you gave (verify)
Use `third_octet = 128 + N*4` and network = `172.16.<third_octet>.0/22`:

- **Network 7** → `128 + 7*4 = 156` → **`172.16.156.0/22`**
  - Range: hosts `172.16.156.1` … `172.16.159.254`, broadcast `172.16.159.255`
- **Network 16** → `128 + 16*4 = 192` → **`172.16.192.0/22`**
  - Range: hosts `172.16.192.1` … `172.16.195.254`, broadcast `172.16.195.255`
- **Network 25** → `128 + 25*4 = 228` → **`172.16.228.0/22`**
  - Range: hosts `172.16.228.1` … `172.16.231.254`, broadcast `172.16.231.255`

(These match your examples.)

### Summary
- **New subnet mask:** `/22 = 255.255.252.0`
- **Subnets available in the /17 block:** `32` (we need 30)
- **Usable hosts per subnet:** `1022`
- **Subnet increment:** `+4` in third octet per subnet (starting at 128)
