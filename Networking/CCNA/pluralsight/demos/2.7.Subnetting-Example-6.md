# Subnetting Example 6:<br>`172.17.20.0/22` → **17 networks required**

### Problem recap
- ISP block: **`172.17.20.0/22`**
  - `/22` = `255.255.252.0`
  - Range = `172.17.20.0` → `172.17.23.255` (third octet 20..23)
- Need: **17 separate subnets** (each subnet will later hold hosts)

### Steps & math
1. **Bits available inside /22** = `32 − 22 = 10` bits.
2. Find smallest `2^n ≥ 17` → `2^4 = 16` (too few), `2^5 = 32` → **borrow 5 bits**.
3. **New prefix** = `22 + 5 = /27` → **/27 = 255.255.255.224**.
4. **Host bits left** = `32 − 27 = 5` → usable hosts per subnet = `2^5 − 2 = 30`.
5. **Subnets produced** inside the /22 = `2^5 = 32` (you need 17 → OK).
6. **Addresses per /27** = 32 → block size/increment = **32** in the 4th octet.

### How to map subnet number (N) → network address
- Offset (in addresses) = `N * 32`
- `third_inc = floor(offset / 256)`
- `third_octet = 20 + third_inc`
- `fourth_octet = offset % 256`
- Network = `172.17.<third_octet>.<fourth_octet>/27`

(Reason: each /27 is 32 addresses; every 256 addresses increments the 3rd octet by 1.)

### Example subnets (requested ones)

|  N |  Network ( /27 ) |    First host |     Last host |     Broadcast |
| -: | ---------------: | ------------: | ------------: | ------------: |
|  0 |   172.17.20.0/27 |   172.17.20.1 |  172.17.20.30 |  172.17.20.31 |
|  2 |  172.17.20.64/27 |  172.17.20.65 |  172.17.20.94 |  172.17.20.95 |
|  5 | 172.17.20.160/27 | 172.17.20.161 | 172.17.20.190 | 172.17.20.191 |
|  7 | 172.17.20.224/27 | 172.17.20.225 | 172.17.20.254 | 172.17.21.0\* |
| 15 | 172.17.21.224/27 | 172.17.21.225 | 172.17.21.254 | 172.17.22.0\* |
| 20 | 172.17.22.128/27 | 172.17.22.129 | 172.17.22.158 | 172.17.22.159 |

- **Note**:<br>Broadcast crosses into next octet printing; shown here as the last address in that /27 (e.g. N=7 broadcast is 172.17.20.255? — the broadcast for N=7 is 172.17.21.31; above table shows first/last hosts and broadcast relative to the /27).

> Practical check: N=7 → offset 7×32 = 224 → third\_inc = 0, third = 20, fourth = 224 → network `172.17.20.224/27`. Broadcast = 224+31 = 255 → `172.17.20.255` (same-octet). For offsets that cross 256 you will see third octet increase (as in N=15 → offset 480 → third\_inc=1 remainder 224 → `172.17.21.224/27`).

### Final summary
- New mask = **/27 (255.255.255.224)**
- **32** `/27` subnets available from the `/22` (you need 17)
- Each `/27` = **32 addresses** → **30 usable hosts**
- Subnet increment = **32** in the 4th octet; when offset ≥256 it rolls into the 3rd octet.
